<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reservas - Shannel Beauty</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <div class="logo">
            <img src="img/unnamed.jpg" alt="logo de Shannel Beauty" width="150" height="150"><h1>Shannel Beauty</h1>
        </div>
    </header>
    <nav>
        <div class="Navegador">
            <ul>
                <li><a href="index.html">Inicio</a></li>
                <li><a href="servicios.html">Servicios</a></li>
                <li><a href="galeria.html">Galería</a></li>
                <li><a href="nosotros.html">Nosotros</a></li>
                <li><a href="reservas.html">Reservas</a></li>
                <li><a href="contacto.html">Contacto</a></li>
            </ul>
        </div>
    </nav>
    <main>
        <section class="reservation">
            <h2>Reservar una Cita</h2>
            <p>Rellena el siguiente formulario para solicitar una reserva. Te confirmaremos la disponibilidad por email o por teléfono.</p>
            <div class="reservation-container">
                <!-- Para enviar a un correo: crea un formulario en Formspree y pega aquí su endpoint en el atributo data-formspree-endpoint.
                     Ejemplo: data-formspree-endpoint="https://formspree.io/f/yourFormId" -->
                <form id="reservationForm" class="reservation-form" data-formspree-endpoint="https://formspree.io/f/mblwdvgw">
                    <!-- Si usas Formspree, el campo _replyto ayuda a que el remitente sea el email del cliente -->
                    <input type="hidden" name="_subject" value="Nueva reserva - Shannel Beauty">
                    <input type="hidden" name="_replyto" id="_replyto" value="">
                    <input type="hidden" name="service_text" id="service_text" value="">
                    <label for="name">Nombre completo</label>
                    <input id="name" name="name" type="text" placeholder="Tu nombre" required>

                    <label for="email">Email</label>
                    <input id="email" name="email" type="email" placeholder="tu@ejemplo.com" required>

                    <label for="phone">Teléfono</label>
                    <input id="phone" name="phone" type="tel" placeholder="+57 300 0000000" required>

                    <label for="service">Servicio</label>
                    <select id="service" name="service" required>
                        <option value="">Selecciona un servicio</option>
                        <option value="maquillaje_eventos">Maquillaje para Eventos (Social)</option>
                        <option value="maquillaje_novia">Paquete Nupcial Completo (Novia)</option>
                        <option value="clases_automaquillaje">Clases de Automaquillaje</option>
                        <option value="clase_individual">Clase Individual</option>
                        <option value="clase_grupo">Grupo (por persona)</option>
                        <option value="otro">Otro (especificar en comentarios)</option>
                    </select>

                    <div class="form-row">
                        <div>
                            <label for="date">Fecha</label>
                            <input id="date" name="date" type="date" required>
                        </div>
                        <div>
                            <label for="time">Hora</label>
                            <input id="time" name="time" type="time" required>
                        </div>
                    </div>

                    <label for="message">Comentarios / Requerimientos</label>
                    <textarea id="message" name="message" placeholder="Describe cualquier preferencia o alergias" rows="4"></textarea>

                    <button type="submit" class="book-button">Solicitar Reserva</button>
                </form>

                <div id="reservationResult" class="reservation-result" aria-live="polite" style="display:none;"></div>
            </div>
        </section>
    </main>

    <footer>
        <div class="footer-content">
            <div class="footer-info">
                <h3>Shannel Beauty</h3>
                <p>Tu belleza en manos profesionales</p>
            </div>
            <div class="footer-contact">
                <p>Email: info@shannelbeauty.com</p>
                <p>Tel: +57 321 8578086</p>
            </div>
        </div>
        <div class="footer-bottom">
            <p>&copy; 2025 Shannel Beauty. Todos los derechos reservados.</p>
        </div>
    </footer>

    <script>
        // Client-side handler: no backend, so we show a confirmation message and clear the form
        (function(){
            const form = document.getElementById('reservationForm');
            const result = document.getElementById('reservationResult');

            // Set minimum allowed date to today and clear messages when user changes the date
            const dateInput = document.getElementById('date');
            if(dateInput){
                const today = new Date();
                today.setHours(0,0,0,0);
                dateInput.min = today.toISOString().split('T')[0];
                dateInput.addEventListener('change', function(){
                    if(result.style.display === 'block'){
                        result.style.display = 'none';
                    }
                });
            }

            form.addEventListener('submit', function(e){
                e.preventDefault();
                const data = new FormData(form);
                // populate hidden _replyto for Formspree
                const replyto = data.get('email') || '';
                const replyInput = document.getElementById('_replyto');
                if(replyInput){ replyInput.value = replyto; }

                    // populate human-readable service text
                    const serviceSelect = document.getElementById('service');
                    const serviceTextInput = document.getElementById('service_text');
                    if(serviceSelect && serviceTextInput){
                        const selected = serviceSelect.options[serviceSelect.selectedIndex];
                        serviceTextInput.value = selected ? selected.text : '';
                        // refresh FormData with updated hidden
                        data.set('service_text', serviceTextInput.value);
                    }

                const endpoint = form.dataset.formspreeEndpoint && form.dataset.formspreeEndpoint.trim();
                // Basic validation (HTML required attributes handle most checks)
                const name = data.get('name');
                const email = data.get('email');
                const service = data.get('service');
                const date = data.get('date');
                const time = data.get('time');

                if(!name || !email || !service || !date || !time){
                    result.style.display = 'block';
                    result.style.color = '#b00020';
                    result.textContent = 'Por favor completa los campos obligatorios.';
                    return;
                }

                // Validate date is not earlier than today
                try {
                    const selDate = new Date(date);
                    selDate.setHours(0,0,0,0);
                    const now = new Date();
                    now.setHours(0,0,0,0);
                    if(selDate < now){
                        result.style.display = 'block';
                        result.style.color = '#b00020';
                        result.textContent = 'La fecha no puede ser anterior a hoy. Por favor elige otra fecha.';
                        return;
                    }
                } catch(err) {
                    // If parsing fails, block submission
                    result.style.display = 'block';
                    result.style.color = '#b00020';
                    result.textContent = 'Fecha inválida. Por favor selecciona una fecha válida.';
                    return;
                }

                if(endpoint){
                    // Send to Formspree
                    fetch(endpoint, {
                        method: 'POST',
                        body: data,
                        headers: { 'Accept': 'application/json' }
                    }).then(function(response){
                        if(response.ok){
                            result.style.display = 'block';
                            result.style.color = '#145214';
                            result.innerHTML = '<strong>¡Solicitud enviada!</strong> Gracias ' + (name.split(' ')[0]||name) + '. Te contactaremos pronto.';
                            form.reset();
                        } else {
                            return response.json().then(function(err){ throw err; });
                        }
                    }).catch(function(err){
                        result.style.display = 'block';
                        result.style.color = '#b00020';
                        result.innerHTML = 'Ocurrió un error al enviar la solicitud. Por favor intenta de nuevo o contáctanos directamente a info@shannelbeauty.com.';
                        console.error('Formspree error:', err);
                    });
                    return;
                }

                // Fallback: Simulate success if no endpoint configured
                result.style.display = 'block';
                result.style.color = '#145214';
                result.innerHTML = '<strong>¡Solicitud simulada!</strong> Gracias ' + (name.split(' ')[0]||name) + '. Tu solicitud quedó registrada localmente.';
                form.reset();
            });
        })();
    </script>
</body>
</html>
<!-- WhatsApp floating button -->
<a class="whatsapp-button" data-tooltip="Reservar por WhatsApp" href="https://wa.me/573022184042?text=Hola%2C%20quiero%20reservar%20un%20servicio" target="_blank" rel="noopener" aria-label="Contactar por WhatsApp">
    <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
        <path d="M20.52 3.48A11.94 11.94 0 0012 0C5.373 0 .001 5.373.001 12a11.9 11.9 0 001.65 6.04L0 24l6.17-1.59A11.94 11.94 0 0012 24c6.627 0 12-5.373 12-12 0-3.2-1.25-6.19-3.48-8.52zM12 21.5c-1.3 0-2.57-.34-3.68-.98l-.26-.15-3.66.94.98-3.57-.17-.29A9.5 9.5 0 012.5 12c0-5.25 4.25-9.5 9.5-9.5S21.5 6.75 21.5 12 17.25 21.5 12 21.5z"/>
        <path d="M17.3 14.1c-.3-.15-1.78-.87-2.06-.97-.28-.1-.48-.15-.68.15-.2.3-.76.97-.93 1.17-.17.2-.34.22-.64.07-.3-.15-1.27-.47-2.42-1.49-.9-.8-1.5-1.78-1.68-2.08-.17-.3-.02-.46.13-.61.13-.13.3-.34.45-.51.15-.17.2-.28.3-.47.1-.2 0-.37-.03-.52-.03-.15-.68-1.64-.93-2.25-.24-.6-.49-.52-.68-.53-.18-.01-.4-.01-.61-.01-.2 0-.52.07-.79.37-.27.3-1.04 1.01-1.04 2.46s1.07 2.86 1.22 3.06c.15.2 2.1 3.2 5.09 4.49 2.99 1.3 3.13 1.02 3.7.96.58-.06 1.78-.73 2.03-1.44.25-.71.25-1.32.17-1.44-.08-.12-.28-.17-.58-.32z"/>
    </svg>
</a>
</body>
</html>